\documentclass[a4paper,11pt,twoside]{include/ThesisStyle}
%\documentclass[10pt,twoside]{include/ThesisStyle}

% =============================================================================


\newcommand{\thesistitle}{Virtualization Support\\for\\Application Runtime Specialization and Extension}
\newcommand{\thesisauthor}{Guillermo Polito}
\newcommand{\thesisurl}{http://rmod.inria.fr/}
\newcommand{\thesissubtitle}{}
\newcommand{\thesisdate}{13. April 2015}

% =============================================================================

\input{include/header}
\graphicspath{{.}{figure/}}

% Uncomment to disable the comments
\setboolean{showcomments}{false}

\begin{document}

% =============================================================================
\pagenumbering{alph}
\include{include/creativecommons}
\include{chapter/title}
% =============================================================================
\pagenumbering{roman}
\dominitoc

% =============================================================================
\cleardoublepage
\chapter*{Acknowledgments}

I would like to thank my thesis supervisors Stéphane Ducasse, Noury Bouraqadi and Luc Fabrese for allowing me to do in the first place a Ph.D at the RMoD and CAR teams, and for their advice during this thesis.\\

\noindent I thank the thesis reviewers and jury members Oscar Nierstrasz, Christophe Dony, Jan Vitek and Loïc Lagadec for accepting being part of the jury of my defense.% reviewing my thesis and providing me valuable feedback.\\

%\noindent I would like to express my gratitude to Igor Stasenko for providing \B and \NB, and Guido Chari for allowing me to use \WF for validation purposes.\\

\noindent I specially thank Santiago, Pablo, Alexis, Esteban, Camille, Charlotte and all others that game me their support me during the time of this thesis.\\

\noindent I would also like to thank the Pharo community for their support and help during my learning. I expect part of this thesis is of value for them.\\
%\noindent For remarks on earlier versions of this thesis I thank Stefan Marr and Damien Pollet.



% =============================================================================
\chapter*{Abstract}

An application runtime is the set of software elements that represent an application during its execution. Application runtimes should be adaptable to different contexts. Advances in computing technology both in hardware and software indeed demand it. For example, on one side we can think on extending a programming language to enhance the developers' productivity. On the other side we can also think on transparently reducing the memory footprint of applications to make them fit in constrained resource scenarios \eg low networks or limited memory availability.

We propose \Vtt, a virtualization infrastructure for object-oriented high-level languages runtimes. \Vtt provides a general purpose infrastructure to control and manipulate object-oriented runtimes in different situations. A first-class representation of an object-oriented runtime, namely an \emph{object space}, provides a high-level API that allows the manipulation of such runtime and clarifies the contract between the language and the virtual machine. A hypervisor is the client of an object space and manipulates it either directly through mirror objects~\cite{Brac04b}, either by executing arbitrary expressions into it.

We implemented a \Vtt prototype on Pharo. We show with this prototype that this infrastructure supports language \emph{bootstrapping} and application runtime \emph{tailoring}. Using bootstrapping we describe an object-oriented high-level language initialization in terms of itself. A bootstrapped language takes benefit of its own abstractions and shows easier to extend. We bootstrapped four languages presenting different programming models \eg traits~\cite{Scha03a}, first-class instance variables~\cite{Verw11a} and mirror-based reflection~\cite{Brac04b}.  Application runtime tailoring is a technique that generates a specialized application by extracting the elements of a program that are used during execution. A tailored application encompasses only the classes and methods it needs and avoids the code bloat that appears from the usage of third-party libraries and frameworks. Our run-fail-grow tailoring technique based on \Vtt succeeds in creating specialized versions of applications, saving between a 95\% and 99\% of memory in comparison with Pharo's official distribution.

\paragraph{Keywords:} application runtimes, object-oriented, high-level, virtualization, first-class runtimes, object spaces, bootstrapping, tailoring.

% =============================================================================
\chapter*{Résumé}

Un environnement d'exécution est l'ensemble des éléments logiciels qui représentent une application pendant son éxecution. Les environnements d'exécution doivent être adaptables à differents contextes. Les progrès des technologies de l'information, tant au niveau logiciel qu'au niveau matériel, rendent ces adaptations nécessaires. Par exemple, nous pouvons envisager d'étendre un language de programmation pour améliorer la productivité des developpeurs. Aussi, nous pouvons envisager de réduire la consommation memoire des applications de manière transparente afin de les adapter à certaines contraintes d'exécution \eg des réseaux lents ou de la mémoire limités.

Nous proposons \Vtt, une infrastructure pour la virtualisation d'environnement d'execution de langages orienté-objets haut-niveau. \Vtt fournit une infrastructure généraliste pour le contrôle et la manipulation d'environnements d'exécution pour différentes situations. Une représentation de 'premier-ordre' de l'environnement d'exécution orienté-objet, que nous appelons \emph{object space}, fournit une interface haut-niveau qui permet la manipulation de ces environnements et clarifie le contrat entre le langage et la machine virtuelle. Un hyperviseur est client d'un object space et le manipule soit directement au travers d'objets 'miroirs'~\cite{Brac04b}, soit en y exécutant des expressions arbitraires.

Nous avons implementé un prototype de \Vtt sur Pharo. Nous montrons au travers de notre prototype que cet infrastructure supporte le \emph{bootstrapping}~(\ie l'amorçage ou initialisation circulaire) des languages et le \emph{tailoring}~(\ie la construction sur-mesure ou 'taille') d'environnement d'éxecution. En utilisant l'amorçage nous initialisons un language orienté-objet haut-niveau qui est auto-décrit. Un langage amorcé profite des ses propres abstractions se montrant donc plus simple à étendre. Nous avons amorcé quatre langages qui présentent des modèles de programmation différents \eg avec des 'traits'~\cite{Scha03a}, avec des variables d'instance de 'premier-ordre'~\cite{Verw11a} ou avec une couche réflexive basé sur le concept de 'miroirs'~\cite{Brac04b}. La taille d'environnements d'éxecution est une technique qui génère une application spécialisé en extrayant seulement le code utilisé pendant l'éxecution d'un programme. Une application taillée inclut seulement les classes et méthodes qu'elle nécessite, et évite que des librairies et des frameworks externes surchargent inutilement la base de code. Notre technique de taille basé sur \Vtt, que nous appelons \emph{run-fail-grow}~(\ie éxecuter-échouer-grandir), créé des versions spécialisées des applications, en sauvant entre un 95\% et 99\% de la memoire en comparaison avec la distribution officielle de Pharo.

% =============================================================================
\renewcommand{\baselinestretch}{1}\normalsize
\tableofcontents
%\listoffigures
%\listoftables

% =============================================================================
\renewcommand{\baselinestretch}{1.2}\normalsize
\mainmatter
\pagenumbering{arabic}
% =============================================================================

\include{chapter/introduction}

\include{chapter/background}

\part{\VTT: an Application Runtime Virtualization Infrastructure}
\include{chapter/objectspaces}
\include{chapter/implementation}

\include{chapter/bootstrapping}
\include{chapter/tailoring}
%\include{chapter/surgery}

\part{Conclusion}
\include{chapter/conclusion}

% =============================================================================

\bibliographystyle{alpha}
\bibliography{others,rmod,scg}

% =============================================================================

\appendix
\include{chapter/appendix}

% =============================================================================
\include{chapter/cv}
\thispagestyle{empty}
% =============================================================================
\end{document}